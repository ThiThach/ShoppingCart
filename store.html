<!DOCTYPE html>
<html lang="en" class="no-us">
	<head>
		<meta charset="utf-8">
		<title>Store</title>

		<link rel="stylesheet/less" href="css/site.less" type="text/css" />
		<script src="js/thirdparties/less-1.4.1.min.js"></script>		
		
	</head>
	
	<body>
		<article>
			<header><h1>Available items</h1></header>
			
			<div>
				Search: <input type="text" data-bind="value:filterText,valueUpdate:'afterkeydown'" />
			</div>
			
			<button type="button" data-bind="click:newItem">New product</button>
			<div data-bind="foreach:filterProducts">
				<div>
					<span data-bind="text:name"></span>,
					$<span data-bind="text:price"></span>,
					<span data-bind="text:stock()"></span>
					<button type="button" data-bind="visible:inStock,click:$parent.buy">Buy</button>
					<span data-bind="visible:!inStock()">Sold out!!!</span>
					|
					<button data-bind="click:$parent.selectItem">Edit</button>
					|
					<button data-bind="click:$parent.remove">Remove</button>
				</div>
			
			</div>
		</article>
		
		
		
		<article data-bind="with:selectedItem">
			<header>
				<h2 data-bind="if:!id()">New</h2>
				<h2 data-bind="if:id()">Editing</h2>
			</header>
				<div>
					<input type="text" data-bind="value:name"></input>,
					<input type="text" data-bind="value:price"></input>,
					<input type="text" data-bind="value:stock"></input>
					<button type="button" data-bind="click:$parent.saveItem">Save</button>
					<button data-bind="click:$parent.cancelItem">Cancel</button>
				</div>
		</article>
		
		
		
		
		<hr/>
		<div>
			<article data-bind="with:cart">

				<header><h1>What's in my cart</h1></header>

					<div data-bind="if:isEmpty">
						Currently is empty
					</div>			
					
					
				<div data-bind="foreach:items">
					<article>
						<header><h3 data-bind="text:name"></h3></header>
						<div>
							Quantity: <input type="text" data-bind="value:bought"/>, 
							@ price: $<span data-bind="text:price"></span>, 
							Total: $<span data-bind="text:total"></span> 
							<button type="button" data-bind="click:updatePurchaseQuantity">Update</button>
							<button type="button" data-bind="click:reset">Remove</button>
						</div>
					</article>
				</div>
				
				<div data-bind="visible:!isEmpty()">
				Sub total: $<span data-bind="text:subtotal"></span>
				</div>
			</article>
		</div>
		

	</body>

	<script type="text/javascript" src="js/thirdparties/knockout-3.0.0beta.debug.js"></script>
	<script type="text/javascript" src="js/utilities/ko-protected-observable.js"></script>
	<script data-main="js/main.js" src="js/thirdparties/require.js"></script>
</html>